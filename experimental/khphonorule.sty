% khphonorule.sty
% (c) 2022 Kenneth Hanson
% (c) 2013-2017 Stefano Coretta
%
% This program can redistributed and/or modified under the terms
% of the LaTeX Project Public License Distributed from CTAN
% archives in directory macros/latex/base/lppl.txt; either
% version 1 of the License, or (at your option) any later version.

\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{khphonorule}
  [2022/08/01 v0.1 LaTeX package for typesetting phonological rules]

\usepackage{xspace}

\newcommand{\phold}{\rule[-1.5pt]{1.5ex}{.5pt}\xspace}
\newcommand{\parrow}{\ensuremath{\rightarrow}\xspace}
\newcommand{\penv}{\ensuremath{/}\xspace}

\newcommand{\phonorule}[3][\parrow]{#2 #1 #3}
\newcommand{\phonorulec}[4][\parrow]{#2 #1 #3~\penv~#4}

\newcommand*{\env}{%
    \@ifstar
        {\@env{&}}
        {\@env{~}}%
    }
\newcommand*{\@env}[3]{#2~/#1#3}

\newcommand*{\pfeat}[2][c]{%
  \ensuremath{%
    \left[\begin{tabular}{#1}#2\end{tabular}\right]%
  }%
}

\newcommand*{\oneof}[2][c]{%
  \ensuremath{%
    \left\{
    \begin{tabular}{@{\hspace{.5ex}}#1#1}#2\end{tabular}
    \right.
  }%
}
